<div class="dashboard">
	<header class="dashboard-header">
		<div class="loading-indicator" *ngIf="loading">
			<span class="loading-text">Loading news... {{ progress }}%</span>
			<div class="progress-bar-container">
				<div class="progress-bar" [style.width.%]="progress"></div>
			</div>
		</div>

		<div class="monitoring-status" [class.active]="monitoring">
			<span class="status-indicator"></span>
			{{ monitoring ? 'Monitoring Active' : 'Monitoring Stopped' }}
		</div>
	</header>

	<div class="stats-grid">
		<div class="stat-card">
			<div class="stat-label">Total News</div>
			<div class="stat-value">{{ stats?.totalNews || 0 }}</div>
		</div>

		<div class="stat-card">
			<div class="stat-label">Filtered News</div>
			<div class="stat-value">{{ stats?.filteredNews || 0 }}</div>
		</div>

		<div class="stat-card">
			<div class="stat-label">Sources Checked</div>
			<div class="stat-value">{{ stats?.sourcesChecked || 0 }}</div>
		</div>

		<div class="stat-card">
			<div class="stat-label">Enabled Sources</div>
			<div class="stat-value">{{ enabledSourcesCount }}</div>
		</div>

		<div class="stat-card">
			<div class="stat-label">Errors</div>
			<div class="stat-value error">{{ stats?.errors || 0 }}</div>
		</div>

		<div class="stat-card">
			<div class="stat-label">Last Update</div>
			<div class="stat-value small">
				{{ stats?.lastUpdate ? (stats?.lastUpdate | date: 'short') : 'Never' }}
			</div>
		</div>
	</div>

	<div class="actions">
		<button
			type="button"
			class="btn btn-primary"
			(click)="startMonitoring()"
			[disabled]="monitoring || enabledSourcesCount === 0 || loading"
		>
			Start Monitoring
		</button>

		<button type="button" class="btn btn-secondary" (click)="stopMonitoring()" [disabled]="!monitoring">
			Stop Monitoring
		</button>

		<button
			type="button"
			class="btn btn-success"
			(click)="refreshNews()"
			[disabled]="enabledSourcesCount === 0 && !loading"
		>
			<span *ngIf="!loading">Refresh News</span>
			<span *ngIf="loading">Cancel</span>
		</button>

		<button
			type="button"
			class="btn btn-danger"
			(click)="clearNews()"
			[disabled]="!stats?.totalNews || stats?.totalNews === 0 || loading"
		>
			Clear News
		</button>
	</div>

	<div class="info-message" *ngIf="enabledSourcesCount === 0">
		<p>⚠️ No enabled sources. Please configure at least one news source to start monitoring.</p>
	</div>
</div>
